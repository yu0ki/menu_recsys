{% extends "layouts/base.html" %}
{% block content %}
{% load static %}
        <div id="hide">
			<div id="user_home_flexbox_top">
				<div id="user_home_weather">
					<canvas id="canvas_weather"></canvas>
				</div>
				<div id ="user_home_tweet">
					<!-- <h2>ï¼ƒPlatePandAã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</h2> -->
					<a class="twitter-timeline" data-width="100%" data-height="200" href="https://twitter.com/kyotoyunesuko?ref_src=twsrc%5Etfw">Tweets by kyotoyunesuko</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
					<!-- <a href="https://twitter.com/intent/tweet?text=%0A%0A%23%E3%81%82%E3%81%AA%E3%81%9F%E3%81%AE%EF%BC%A7%EF%BC%B7%E4%BA%88%E5%AE%9A%E8%A1%A8%20%23PlatePandA%0Ahttps%3A%2F%2Fgithub.com/yu0ki/menu_recsys%0A" class="twitter-hashtag-button" data-show-count="false">Tweet #PlatePandA</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> -->
					<blockquote class="twitter-tweet"><p lang="zh" dir="ltr" >æ— å¿§æ— è™‘ï¼Œæ­¤ç”Ÿåªè´Ÿè´£å¯çˆ±ğŸ˜ğŸ˜<a href="https://twitter.com/hashtag/panda?src=hash&amp;ref_src=twsrc%5Etfw">#panda</a> <a href="https://twitter.com/hashtag/animal?src=hash&amp;ref_src=twsrc%5Etfw">#animal</a> <a href="https://twitter.com/hashtag/cute?src=hash&amp;ref_src=twsrc%5Etfw">#cute</a> <a href="https://t.co/FQxxYAQ4Ic">pic.twitter.com/FQxxYAQ4Ic</a></p>&mdash; å°ç‘· (@qinxiaoai1) <a href="https://twitter.com/qinxiaoai1/status/1655913007879270400?ref_src=twsrc%5Etfw">May 9, 2023</a></blockquote> 
					<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
					<!-- <p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„2</p> -->
				</div>
			</div>
			<div id="user_home_flexbox_bottom">
				<div id="user_home_panda" style="margin:0px;overflow:hidden">
					<canvas id="canvas_panda" ></canvas>
				</div>
				<div id="user_home_tool">
					<div id="user_home_tool_item">
						<div id="user_home_tool_align">
							<a href="../search.html">
								<img src="{% static 'images/search_mushimegane.png' %}" id="user_home_tool_img" alt="æ¤œç´¢" >
							</a>
						</div>
					</div>
					<div id="user_home_tool_item">
						<div id="user_home_tool_align">
							<a href="../camera.html">
								<img src="{% static 'images/camera.png' %}" id="user_home_tool_img" alt="ã‚«ãƒ¡ãƒ©">
							</a>
						</div>
					</div>
					<div id="user_home_tool_item">
						<div id="user_home_tool_align">
							<a href="../setting.html" >
								<img src="{% static 'images/setting.png' %}" id="user_home_tool_img" alt="è¨­å®š">
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			"use strict";
			var idx_weather = 22
			var idx_tool = 24
			// ã‚«ã‚¦ãƒ³ã‚¿å¤‰æ•°ã®åˆæœŸåŒ–
			var count = 0;

			var pathList = [
				//å¥åº·ä½“ 500x500
				"{% static 'images/panda_anim/nomal1.png' %}",
				"{% static 'images/panda_anim/nomal2.png' %}",
				"{% static 'images/panda_anim/nomal3.png' %}",
				"{% static 'images/panda_anim/muscle1.png' %}",
				"{% static 'images/panda_anim/muscle2.png' %}",
				"{% static 'images/panda_anim/muscle3.png' %}",
				"{% static 'images/panda_anim/idol1.png' %}",
				"{% static 'images/panda_anim/idol2.png' %}",
				"{% static 'images/panda_anim/idol3.png' %}",
				//å…ƒæ°—ãªã—
				"{% static 'images/panda_anim/weak1.png' %}",
				"{% static 'images/panda_anim/weak2.png' %}",
				//å¤ªã‚Šã™ã
				"{% static 'images/panda_anim/fat1.png' %}",
				"{% static 'images/panda_anim/fat2.png' %}",
				"{% static 'images/panda_anim/fat3.png' %}",
				//ç§»å‹•
				"{% static 'images/panda_anim/stand.png' %}",
				"{% static 'images/panda_anim/run_left1.png' %}",
				"{% static 'images/panda_anim/run_left2.png' %}",
				"{% static 'images/panda_anim/stop_left.png' %}",
				"{% static 'images/panda_anim/run_right1.png' %}",
				"{% static 'images/panda_anim/run_right2.png' %}",
				"{% static 'images/panda_anim/stop_right.png' %}",

				//2552x1701
				"{% static 'images/kusunoki.png' %}",


				//å¤©æ°—
				"{% static 'images/sunny.png' %}",
				"{% static 'images/sky.png' %}", //1024x683
				//ãƒ„ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³
				"{% static 'images/search_mushimegane.png' %}",
				"{% static 'images/camera.png' %}",
				"{% static 'images/animal_01_i.png' %}"
			];

			//ç”»åƒèª­ã¿è¾¼ã¿
			var img = new Array();
			for (var i = 0; i < pathList.length; i++) {
    			var image = new Image();
    			image.src = pathList[i];
    			img.push(image);
			}

			//å¤©æ°—éƒ¨åˆ†ã®æç”»
			function weather(){
				const frame = document.getElementById( "user_home_weather" );
				const canvas = document.getElementById("canvas_weather");
				// 2Dã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹
				const ctx = canvas.getContext("2d"); 
				canvas.width = frame.clientWidth;
				canvas.height = frame.clientHeight;
				const dw = frame.clientWidth;
				const dh = frame.clientHeight;
				var weather = "{{ weather }}";
				const img_weather = new Image();

				ctx.drawImage(img[idx_weather+1], 0, 0, 1024, 683, 0, 0, dw, dh);
				if (weather="æ™´ã‚Œ"){
					img_weather.src = "{% static 'images/sunny.png' %}";
					ctx.drawImage(img[idx_weather], 0, 0, 600, 600, 20, 0, dh/2, dh/2);
				}

				ctx.fillStyle = 'rgba(255, 0, 0)';
				// ctx.font = '20pt Arial';
				ctx.font = 'bold 20px sans-serif'
				var maxt_text = "æœ€é«˜æ°—æ¸©ã€€" + "{{ max_temp }}"
				var mint_text = "æœ€ä½æ°—æ¸©ã€€" + "{{ min_temp }}"
				//æ–‡å­—ã®èƒŒæ™¯
				var maxt_w = ctx.measureText(maxt_text);
				var mint_w = ctx.measureText(mint_text);

				//å…ˆã«èƒŒæ™¯ãƒœãƒƒã‚¯ã‚¹ã‚’æç”»
				ctx.fillStyle = '#e0ffff';
				ctx.fillRect(20,dh*3/5-10,maxt_w.width,20);
				ctx.fillRect(20,dh*4/5-10,maxt_w.width,20);
				//5pxã®ç·šã®å››è§’å½¢ã§å›²ã‚€
				ctx.strokeStyle = '#e0ffff';
				ctx.lineWidth = 5;
				ctx.strokeRect(20,dh*3/5-10,maxt_w.width,20);
				ctx.strokeRect(20,dh*4/5-10,maxt_w.width,20);
				//ãƒ†ã‚­ã‚¹ãƒˆã‚’æç”»
				ctx.textBaseline = 'middle'
				ctx.fillStyle = 'rgba(255, 0, 0)';
				ctx.fillText(maxt_text, 20, dh*3/5);
				ctx.fillStyle = 'rgba(0, 0, 255)';
				ctx.fillText(mint_text, 20, dh*4/5);
			}

			//ãƒ‘ãƒ³ãƒ€éƒ¨åˆ†ã®æç”»
			function panda(){
				// ã‚­ãƒ£ãƒ³ãƒã‚¹è¦ç´ ã‚’å–å¾—ã™ã‚‹
				const	frame = document.getElementById( "user_home_panda" );
				var canvas = document.getElementById("canvas_panda");
				canvas.width = frame.clientWidth;
				canvas.height = frame.clientHeight;
				const dw = frame.clientWidth;
				const dh = frame.clientHeight;

				// 2Dã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹
				var ctx = canvas.getContext("2d"); 
				
				var img_back = new Image();
				img_back.src = "{% static 'images/camp.png' %}";//1920x1080

				var img_g = new Image();//330x330
				img_g.src = "{% static 'images/animal_01_g.png' %}";
				var img_i = new Image();
				img_i.src = "{% static 'images/animal_01_i.png' %}";

				// ctx.drawImage(img_back, 900 - (dw/2), 900 - dh, dw, dh, 0, 0, dw, dh);
				// ctx.drawImage(img[0], 2552/2 - (dw/2), 1701-dh*3, dw, dh*3, 0, 0, dw, dh);
				ctx.drawImage(img[21], 2552/2 - (1701*dw)/dh/2, 0, (1701*dw)/dh, 1701, 0, 0, dw, dh);
				// if ((count %80) > 40 ) {
				// 		ctx.drawImage(img_g, 0, 0, 330, 330, (dw/2) - (dh/6), dh*1/2, dh/3, dh/3);
				// } else {
				// 		ctx.drawImage(img_i, 0, 0, 330, 330, (dw/2) - (dh/6), dh*1/2, dh/3, dh/3);
				// }
				if ((count %80) > 40 ) {
						ctx.drawImage(img[0], 0, 0, 500, 500, (dw/2)-dh/4, dh*1/2, dh/2, dh/2);
				} else {
						ctx.drawImage(img[1], 0, 0, 500, 500, (dw/2)-dh/4, dh*1/2, dh/2, dh/2);
				}
			}

			//htmlã®æç”»ã«ã—ãŸã®ã§ä½¿ã£ã¦ãªã„ã§ã™
			//ãƒ„ãƒ¼ãƒ«éƒ¨åˆ†ã®æç”»
			function tool(){
				// ã‚­ãƒ£ãƒ³ãƒã‚¹è¦ç´ ã‚’å–å¾—ã™ã‚‹
				const	frame = document.getElementById( "user_home_tool" );
				const canvas = document.getElementById("canvas_tool");
				canvas.width = frame.clientWidth;
				canvas.height = frame.clientHeight;
				const dw = frame.clientWidth;
				const dh = frame.clientHeight;

				// 2Dã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹
				var ctx = canvas.getContext("2d"); 

				var img_search = new Image();
				img_search.src = "{% static 'images/search_mushimegane.png' %}";//256x256
				var img_camera = new Image();
				img_camera.src = "{% static 'images/camera.png' %}";//256x256
				var img_setting = new Image();
				img_setting.src = "{% static 'images/setting.png' %}";//256x256

				// ctx.drawImage(img_search, 0, 0, 256, 256, dw/2-dh/6, 0, dh/3, dh/3);
				// ctx.drawImage(img_camera, 0, 0, 256, 256, dw/2-dh/6, dh/3, dh/3, dh/3);
				// ctx.drawImage(img_setting, 0, 0, 256, 256, dw/2-dh/6, dh*2/3, dh/3, dh/3);
			}

			// requestAnimationFrame()ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ«ãƒ¼ãƒ—ã‚’å®Ÿè¡Œ
			function loop() {
				// ã‚«ã‚¦ãƒ³ã‚¿ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
				count++;

				//å¤©æ°—éƒ¨åˆ†
				weather();
				//ãƒ‘ãƒ³ãƒ€éƒ¨åˆ†
				panda();
				//ãƒ„ãƒ¼ãƒ«éƒ¨åˆ†
				//tool();

				   // æ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹
				requestAnimationFrame(loop);
			}

			requestAnimationFrame(loop);


		</script>
	
			

{% endblock %}